generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id Int @id @default(autoincrement())

  email      String  @unique
  first_name String
  last_name  String
  avatar     String?
  password   String

  created_at DateTime  @default(now())
  updated_at DateTime?

  @@map("users")
}

model Package {
  id Int @id @default(autoincrement())

  type           String  @unique
  name           String
  requests_limit Int
  price          BigInt  @default(0)
  is_active      Boolean @default(false)

  created_at DateTime  @default(now())
  updated_at DateTime?

  @@map("packages")
}

model Metropolitan {
  id Int @id @default(autoincrement())

  code     String    @unique
  name     String
  zipCodes ZipCode[]

  created_at DateTime  @default(now())
  updated_at DateTime?

  @@map("metropolitans")
}

model State {
  id Int @id @default(autoincrement())

  code String @unique
  name String

  created_at DateTime  @default(now())
  updated_at DateTime?

  counties County[]

  @@map("states")
}

model County {
  id Int @id @default(autoincrement())

  code String @unique
  name String

  created_at DateTime  @default(now())
  updated_at DateTime?

  stateId Int
  state   State @relation(fields: [stateId], references: [id])

  zipCodes ZipCode[]

  @@map("counties")
}

model ZipCode {
  id Int @id @default(autoincrement())

  code   String @unique
  prices Json

  created_at DateTime  @default(now())
  updated_at DateTime?

  counties      County[]
  metropolitans Metropolitan[]

  @@map("zip_codes")
}
